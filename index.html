<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Med Mel</title>
  <!-- favicon -->
  <link rel="shortcut icon" type="image/png" href="img/favicon/logo.png">
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <!-- <style> -->
  <link rel="stylesheet" type="text/css" href="css/headerStyle.css">
  <link rel="stylesheet" type="text/css" href="css/overlayPage.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="css/cookies.css">
  <link rel="stylesheet" type="text/css" href="css/index.css">
  <link href="css/jquery-linedtextarea1.css" type="text/css" rel="stylesheet">
  
  <!-- JavaScript -->
  <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
  <script src="script/jquery-linedtextarea.js"></script>

  <!-- Custom JavaScript controller -->
  <script src="script/controllerMenu.js"></script>
  <script src="script/storeLoadStavesController.js"></script>
  <script src="./script/userEvent.js"></script>

  <!--*******************Player******************* -->
  <script src="https://cdn.rawgit.com/mohayonao/web-audio-api-shim/master/build/web-audio-api-shim.min.js"></script>
  <script src="./script/playStaves.js"></script>

  <!-- *************pdf export ****************** -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>

  <!-- ************* Font *************-->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&family=Roboto:wght@300&display=swap" rel="stylesheet">

  <!-- *******************Syl separator******************* -->
  <script  src="script/sylSeparator.js"></script>

  <!-- *******************Divide screen******************* -->
  <script  src="script/divideScreen.js"></script>

<style>


/* Login overlay */
button:focus {
  outline: none;
}

#logos-wrapper{
  display: flex;
  flex-direction: row;
  justify-content: center;
  gap: 20px;
}
.funder-logo{
  height: 70px;
  width: auto;

}
</style>


</head>
    <body>
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ6F437"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->

        <header>
            <div id="header"></div>
        </header>
        <!-- Page Content -->
        <div id="bodyContainer">
            <div class="hpContainer left-section">
              <h1 class="hp hpHeader"><strong>MedMel</strong>  The Music<br>of Medieval<br>Vernacular Lyric</h1>
              <p class="hp hpText">
              The MedMel project contains digital editions of monodic melodies of Troubadours, Trouvères and Trobadores lyrics, and it is aimed at musicologists, philologists and performers.<br>
              The MedMel database allows you to search lyrics and melodic patterns, customize your visualization, switch from modern to ancient notation, export the music sheet and listen to the melody.<br>
              The digital editions are created with the MelMed Editor, which we made publicly available for scholars and musicians who need an expressive and simple tool to transcribe medieval music.<br>
              <span style="top:5px;font-weight:bold;"><a href="#info" id="infoLink">Find out more</a></span>
              </p>
            </div>

            <div class="right-section" id="hb-right-section">

                <button onclick="loadPage('viewer.html')" class ="homeButton" title="Viewer">
                    <img alt="" class ="iconButtonHome" src="img/icons/viewer1.png">
                </button>

                <button onclick="loadPage('searchToolSelect.html')" class ="homeButton" title="Search Melody">
                    <img alt="" class ="iconButtonHome" src="img/icons/searchMelody.png">
                </button>
                
                <button onclick="loadPage('searchSong.html')" class ="homeButton" title="Search Full Melody">
                    <img alt="" class ="iconButtonHome" src="img/icons/searchFullMelody.png">
                </button>
                
                <button onclick="loadPage('compareTool.html')" class ="homeButton" title="Compare Tool">
                    <img alt="" class ="iconButtonHome" src="img/icons/compare1.png">
                </button>

                <button id="btnEditorHome" onclick="loadPage('editor.html')" style="display:none;" class ="homeButton" title="Editor">
                    <img alt="" class ="iconButtonHome" src="img/icons/editor1.png">
                </button>

                <button id="btnAdmin" onclick="loadPage('admin.html')" style="display:none;" class ="homeButton" title="Administrator Panel" >
                    <img alt="" class ="iconButtonHome" src="img/icons/users2.png">
                </button>
                
            
              </div>
          
        </div>

        <div id="overlayPanel" style="display:none; overflow: auto;" class="overlayPanel ">
        </div>
        <div class="cookiebar" id="cookiebar" style="display: none">
          <p class="cookie-message">This website uses technical cookies.    <br><a href="./privacy-and-cookie-policy.html" class="cookiebar-btn">Privacy and Cookie policy   </a>
          </p>
          <div class="cookiebar-buttons">
          <button data-accept="cookiebar" class="cookiebar-btn cookiebar-confirm" onclick="acceptCookies()">Accept</button>
        </div>
      </div>
      
      <div style="background-color:#435a70; padding:20px">
        <p style="text-align:center">
        <br>
        
        <a href="./searchSong.html" style="color:white">Try the new Search Melody tool prototype</a>
        </p>
      </div>
      
      <div id="info" class="large-view">
        
        <table class="withMargin centred marginTop30">
          <tr>
            <td>
            </td>
            <td class="right desc-side">
              <h3>Viewer</h3>
            </td>
          </tr>
          <tr>
            <td>
              <button class ="homeButton info" title="Viewer">
                <a href="./viewer.html"><img alt="" class ="iconButtonHome" src="img/icons/viewer1.png"></a>
              </button>
              <div class="maniculaDiv">
                <img alt="" id="manicula1" src="./img/images/manicula.png">
              </div>
            </td>
            <td width="400px;" class="right desc-side">
              <p>
                In the Viewer you will find all the public transcriptions.
                Search by song, author, or manuscript, and customize your visualization.<br>
              </p>
            </td>
          </tr>
        </table>

        <br><br><br><br><br>
        <table class="withMargin centred right">
          <tr>
            <td class="left desc-side">
              <h3>Melody Search</h3>

            </td>
            <td>
            </td>
          </tr>
          <tr>
            <td width="400px;" class="left desc-side">
              <p>
              Search melodic segments within the encoded melodies.
               Look up exact matches or apply a percentage of tollerance and find similar patterns and variants.
              </p>
            </td>
            <td width="400px;" class="imageRight">

              <button class ="homeButton info" title="Search melody">
                  <a href="./searchToolSelect.html"><img alt="" class ="iconButtonHome" src="img/icons/searchMelody.png"></a>
              </button>
              <div class="maniculaDiv">
                <img alt="" id="manicula2" src="./img/images/manicula2.png">
              </div>
            </td>
          </tr>
        </table>
      
        <br><br><br><br><br>

        
        <table class="withMargin centred">
          <tr>
            <td>
            </td>
            <td class="right desc-side">
              <h3>Compare Melodies</h3>
            </td>
          </tr>
          <tr>
            <td>
              <button class ="homeButton info" title="Compare melodies">
                  <a href="./compareTool.html"><img alt="" class ="iconButtonHome" src="img/icons/compare1.png"></a>
              </button>
              <div class="maniculaDiv">
                <img alt="" id="manicula3" src="./img/images/manicula3.png">
              </div>
            </td>
            <td width="400px;" class="right desc-side">
              <p>
                Visualize different versions of a song or compare any melody you want.
                Hide identical notes, highlight differences and make exciting musicological discoveries.<br>
              </p>
            </td>
          </tr>
        </table>
        <br><br><br><br><br>
        <table class="withMargin centred right">
          <tr>
            <td class="left desc-side">
              <h3>Medieval Music Editor</h3>

            </td>
            <td>
            </td>
          </tr>
          <tr>
            <td width="400px;" class="left desc-side">
              <p>
                Transcribe in modern stemless, square, and even Messin notation.
                Export your edition as pdf, html, MEI Neume files, or simply take a screenshot.
                To get started, log in and follow <a class="link" href="./pages/manual.html">a few simple instructions <svg width="16px" height="16px" viewBox="0 0 24 24">
                  <g transform="translate(0,3)" id="external_link" class="icon_svg-stroke" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                    <polyline stroke="#303C42" points="17 13.5 17 19.5 5 19.5 5 7.5 11 7.5"></polyline>
                    <path stroke="#303C42" d="M14,4.5 L20,4.5 L20,10.5 M20,4.5 L11,13.5"></path>
                  </g>
                </svg></a>
              </p>
            </td>
            <td width="400px;" class="imageRight">

              <button class ="homeButton info" title="Editor">
                  <a href="./editor.html"><img alt="" class ="iconButtonHome" src="img/icons/editor1.png"></a>
              </button>
              <div class="maniculaDiv">
                <img alt="" id="manicula4" src="./img/images/manicula4.png">
              </div>
            </td>
          </tr>
        </table>
        <br><br><br><br><br>
      </div>
        
        
        
        
        
        
        
        <!-- small view -->
        <div id="info" class="narrow-view">
          
          <table class="withMargin centred marginTop30">
            <tr>
              <td>
                <button class ="homeButton info" title="Viewer">
                  <a href="./viewer.html"><img alt="" class ="iconButtonHome" src="img/icons/viewer1.png"></a>
                </button>
                <div class="maniculaDiv">
                  <img alt="" id="manicula1" src="./img/images/manicula.png">
                </div>
              </td>
              <tr>
                <td>
                  <h3>Viewer</h3>
                <p>
                  In the Viewer you will find all the public transcriptions.
                  You will be able to search by song, author, and manuscripta, find digital edition of melodies and customize your visualizion.<br>
                </p>
              </td>
            </tr>
          </table>
          <br><br>
          <table class="withMargin centred">
            <tr>
              <td width="400px;" class="right-image-bottom">
                <button class ="homeButton info" title="Search melody">
                    <a href="./searchToolSelect.html"><img alt="" class ="iconButtonHome" src="img/icons/searchMelody.png">
                </button>
                <div class="maniculaDiv">
                  <img alt="" id="manicula2" src="./img/images/manicula2.png">
                </div>
              </td>
            </tr>
            <tr>
              <td width="400px" class="">
                <h3>Melody Search</h3>

                <p>
                  Search melodic segments within the encoded melodies.
                 You can look up exact matches or apply a percentage of tollerance and find similar patterns and variants.<br>
                 A new searching tool allows you to compare a whole song with the repertor
                </p>
              </td>
            </tr>
          </table>
          <br><br>
          <table class="withMargin centred">
            <tr>
              <td>
                <button class ="homeButton info" title="Compare melodies">
                    <a href="./compareTool.html"><img alt="" class ="iconButtonHome" src="img/icons/compare1.png"></a>
                </button>
                <div class="maniculaDiv">
                  <img alt="" id="manicula3" src="./img/images/manicula3.png">
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <h3>Compare Melodies</h3>
                <p>
                  Visualize different versions of a song or compare any melody you want.
                  Hide identical notes, higlight differences and make exciting musicological discoveries.<br>
                </p>
              </td>
            </tr>
          </table>
          <br><br>
          <table class="withMargin centred right">
            <tr>
              <td class="">

                <button class ="homeButton info" title="Editor">
                    <a href="./editor.html"><img alt="" class ="iconButtonHome" src="img/icons/editor1.png"></a>
                </button>
                <div class="maniculaDiv">
                  <img alt="" id="manicula4" src="./img/images/manicula4.png">
                </div>
              </td>
            </tr>
            <tr>
              <td class="desc">
                <h3>Medieval Music Editor</h3>
                <p>
                  Transcribe in modern stemless, square and even Messin notation.
                  Export your edition as pdf, html, MEI Neume files, or simply take a screenshot.
                  To get started, log in and follow <a class="link" href="./pages/manual.html">a few simple instructions <svg width="16px" height="16px" viewBox="0 0 24 24">
                    <g transform="translate(0,3)" id="external_link" class="icon_svg-stroke" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                      <polyline stroke="#303C42" points="17 13.5 17 19.5 5 19.5 5 7.5 11 7.5"></polyline>
                      <path stroke="#303C42" d="M14,4.5 L20,4.5 L20,10.5 M20,4.5 L11,13.5"></path>
                    </g>
                  </svg></a>
                </p>
              </td>
            </tr>
          </table>
          <br><br><br><br><br>
        </div>

        <div id="projects">
          <h3 id="projects-header">Projects</h3>
          <div class="project-container" id="troubadours">
            <a href="https://medmel.seai.uniroma1.it/troubadours/">
            <div class="project-image">
              <img alt="" src="img/images/project-troubadours.png"/>
            </div>
          </a>
          <a href="https://medmel.seai.uniroma1.it/troubadours/">
            <div class="project-description">
              <h3>Digital Edition of Troubadour Melodies</h3>
              <p>A complete digital edition of troubadour the 333 exant melodies in modern and ancient notation.<br>
              Editors: S. Milonia, A. Camprubí Vinyals, S. M. Visalli, E. Faillace</p>
            </div>
          </a>
          </div>

          <a href="https://medmel.seai.uniroma1.it/viewer.html?mss=x_u-occitan-u_u-french">
            <div class="project-container" id="french-U">
                <div class="project-image">
                  <img alt="" src="img/images/project-U.png"/>
                </div>
                <div class="project-description">
                  <h3>Trouvère Chansonnier U <br>(Paris, BnF, fr. 20050)</h3>
                  <p>This small French manuscript copied in Lorraine in the middle of the 13<sup>th</sup> century is the most ancient chansonnier of the Gallo-Romance tradition and the only one with Messine musical notation. While this is primarily a French collection, it also contains an invaluable section of Occitan lyrics.<br>
                  Editor: S. Milonia.</p>
                </div>
            </div>
          </a>

          <a href="https://medmel.seai.uniroma1.it/viewer.html?mss=k_u-french">
            <div class="project-container" id="french-K">
              <div class="project-image">
                <img alt="" src="img/images/project-K.png"/>
              </div>
              <div class="project-description">
                <h3>Trouvère Chansonnier K <br>(Paris, Bibliothèque de l'Arsenal, 5198)</h3>
                <p>This beautiful 14th century French chansonnier, collects 483 trouvère melodies in square notation. It is closely related for both text and music to the important family of chansonniers XN, O and P.<br>
                Editor: A. Camprubí Vinyals; Status: 137/483 items</p>
                </p>
                
              </div>
            </div>
          </a>

        </div>

        <div class="subHeadDiv credits">
          <p>
            <strong>PI:</strong> Stefano Milonia (Eberhard Karls Universität Tübingen)<br>
            <a href="pages/credits.html">Credits</a>
            <div id="logos-wrapper">
              <img class="funder-logo" src="img/images/mariecurie-logo.jpg" alt="">
              <img class="funder-logo" src="img/images/cofundEU-logo.png" alt="">
              
              <img class="funder-logo" src="img/images/warwick_logo.png" alt="">
              <img class="funder-logo" src="img/images/logo_ssm.png" alt="">
              <img class="funder-logo" src="img/images/tuebingen-logo.png" alt="">
              <img class="funder-logo" src="img/images/logo_sapienza.png" alt="">
            </div>
          </p>
        </div>
      </div>
    </body>
</html>
<script>
function loadPage(page){
    window.location.href = "./"+page;
    // let divbodyContainer = document.getElementById("bodyContainer");
    // $(divbodyContainer).load(page);
    localStorage.setItem("current_page", page);
}



function setupButtonsHome(permission){
    if(permission != 1){
        if(permission>3 || permission <1){// user not logged
        }
        else {
            document.getElementById("btnEditorHome").style.display= "inline-block";
        }
        document.getElementById("btnAdmin").style.display= "none";
    }
    else {
        document.getElementById("btnAdmin").style.display= "inline-block";
        document.getElementById("btnEditorHome").style.display= "inline-block";
    }

}
function checkUserPermissionHome(){
    //current user----------------------------------------------
    let email = localStorage.getItem("session_email");
    let password = localStorage.getItem("session_psw");
    $.ajax({
        type : "POST",  //type of method
        url  : "./php/userInfo.php",  //your page
        data : {email: email, password : password},
        success : function(data){
            try{
                let obj = jQuery.parseJSON(data);
                let status = obj[5];
                setupButtonsHome(status);
            }catch{}

        }
    });
}
window.onload = localStorage.setItem("current_page", "index.html");
window.onload = checkUserPermissionHome();
window.onload  = setHomeButtonPosition();
window.onresize = setHomeButtonPosition;

function setHomeButtonPosition(){
  if (window.innerWidth > 899){
    let containerHeight = document.getElementById("bodyContainer").offsetHeight;
    let rs = document.getElementById("hb-right-section").style.marginTop = containerHeight/2.5+"px"
  } else {
    document.getElementById("hb-right-section").style.marginTop = "10px";   
  }
}

function acceptCookies(){
//  document.cookie = "acceptCookies=1";
  localStorage.setItem('acceptCookies','1');

  checkCookies();
}
var acceptCookie;
function checkCookies(){
  //acceptCookie = document.cookie.indexOf("acceptCookies=1");
  acceptCookie = localStorage.getItem('acceptCookies');

  if (acceptCookie == 1){
    document.getElementById("cookiebar").style.display = "none";
  }else{
    document.getElementById("cookiebar").style.display = "block";
  }
}
checkCookies();

function callLogin(){
  setTimeout(function(){
    addContentToOverlay('overlayPages/loginForm.html', 'logo');
  }, 200);
}

function checkAuthEditor() {
      //current user----------------------------------------------
      let email = localStorage.getItem("session_email");
      let password = localStorage.getItem("session_psw");
      $.ajax({
          type : "POST",  //type of method
          url  : "./php/userInfo.php",  //your page
          data : {email: email, password : password},
          success : function(data){
              try{
                  let obj = jQuery.parseJSON(data);
                  let status = obj[5];
                  goToEditorOrLogin(status);
              }catch{
              }

          }
      });
  }
function goToEditorOrLogin(permission){
  if (permission > 3 || permission === undefined){
    addContentToOverlay('overlayPages/loginForm.html', 'logo');
  }else{
    loadPage('editor.html');
  }
}



</script>
